<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

<div class="container mt-5">
    <div class="card shadow-lg">
      <div class="card-header text-black">
        <h4 class="text-center">Gestion des rôles</h4>
      </div>
      <div class="p-4">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Nom d'utilisateur</th>
                <th scope="col">Role</th>
                <th scope="col">Opération</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngIf="User.roles && User.roles.length > 0">
                <tr>
                  <td [attr.rowspan]="User.roles.length + 1">{{User.username}}</td>
                </tr>
                <tr *ngFor="let r of User.roles">
                  <td>{{r.role}}</td>
                  <td>
                    <a (click)="removeRoleFromUsers(r.role_id)">
                        <i class="fas fa-trash-alt"
                        style="color: hsl(0, 100%, 73%); font-size: 30px;"></i>
                    </a>
                  </td>
                </tr>
              </ng-container>
              <ng-container *ngIf="!(User.roles && User.roles.length > 0)">
                <tr>
                  <td colspan="3">Aucun rôle disponible</td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
  
        <!-- Role Selection Section -->
        <div class="form-group">
          <label for="roleSelect">Ajouter un rôle</label>
          <select [(ngModel)]="idOfRole" name="roleSelect" class="form-control mx-auto">
            <option *ngFor="let rr of roles" [ngValue]="rr">{{rr.role}}</option>
          </select>
        </div>
  
        <!-- Add Role Button -->
        <div class="text-center">
          <button class="btn btn-light" (click)="addRoleToUser()" data-toggle="modal" data-target="#successModal">Ajouter</button>
        </div>


        <!-- Modal -->
<div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="successModalLabel">Succès</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body text-center">
          <img src="../assets/image/mes_im/good.png" class="img-fluid" alt="Ajout avec succès">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
        </div>
      </div>
    </div>
  </div>

      </div>
    </div>
  </div>